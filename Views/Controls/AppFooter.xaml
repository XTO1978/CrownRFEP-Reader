<?xml version="1.0" encoding="utf-8" ?>
<ContentView
    x:Class="CrownRFEP_Reader.Views.Controls.AppFooter"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:controls="clr-namespace:CrownRFEP_Reader.Views.Controls"
    BackgroundColor="Transparent"
    HeightRequest="36">

    <Grid>
        <!--  Línea separadora superior  -->
        <BoxView
            HeightRequest="0.6"
            VerticalOptions="Start"
            Color="#FF3A3A3A" />
        <!--  Contenido principal del footer  -->
        <Grid
            Padding="16,0"
            ColumnDefinitions="Auto,Auto,*,Auto,Auto,Auto,Auto"
            ColumnSpacing="20"
            VerticalOptions="Center">

            <!--  Estado de la BD con botón de logs  -->
            <Border
                Grid.Column="0"
                Padding="6,2"
                BackgroundColor="Transparent"
                Stroke="Transparent"
                StrokeShape="RoundRectangle 4">
                <Border.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnDatabaseStatusTapped" />
                </Border.GestureRecognizers>
                <HorizontalStackLayout Spacing="5">
                    <controls:SymbolIcon
                        x:Name="DatabaseStatusIcon"
                        SymbolName="checkmark.circle.fill"
                        TintColor="#FF4CAF50"
                        HeightRequest="{StaticResource IconSizeSmall}"
                        WidthRequest="{StaticResource IconSizeSmall}"
                        VerticalOptions="Center" />
                    <Label
                        FontSize="{StaticResource FontSizeSmall}"
                        Text="BD"
                        TextColor="#FF8A8A8A"
                        VerticalOptions="Center" />
                </HorizontalStackLayout>
            </Border>

            <!--  Indicador de operación en curso  -->
            <HorizontalStackLayout
                x:Name="OperationPanel"
                Grid.Column="1"
                Spacing="8"
                IsVisible="False"
                VerticalOptions="Center">
                <ActivityIndicator
                    x:Name="OperationIndicator"
                    HeightRequest="16"
                    WidthRequest="16"
                    IsRunning="True"
                    Color="#FF4CAF50" />
                <Label
                    x:Name="OperationLabel"
                    FontSize="{StaticResource FontSizeBody}"
                    TextColor="#FFB0B0B0"
                    VerticalOptions="Center" />
                <Label
                    x:Name="ProgressLabel"
                    FontSize="{StaticResource FontSizeBody}"
                    TextColor="#FF8A8A8A"
                    VerticalOptions="Center" />
            </HorizontalStackLayout>

            <!--  Mensaje de estado (cuando no hay operación)  -->
            <Label
                x:Name="StatusLabel"
                Grid.Column="1"
                FontSize="{StaticResource FontSizeBody}"
                Text="Listo"
                TextColor="#FF6A6A6A"
                VerticalOptions="Center" />

            <!--  Spacer central  -->
            <BoxView Grid.Column="2" Color="Transparent" />

            <!--  Contador de vídeos  -->
            <HorizontalStackLayout
                Grid.Column="3"
                Spacing="6"
                VerticalOptions="Center">
                <controls:SymbolIcon
                    SymbolName="film"
                    TintColor="#FF8A8A8A"
                    HeightRequest="{StaticResource IconSizeSmall}"
                    WidthRequest="{StaticResource IconSizeSmall}"
                    VerticalOptions="Center" />
                <Label
                    x:Name="VideoCountLabel"
                    FontSize="{StaticResource FontSizeBody}"
                    Text="0 vídeos"
                    TextColor="#FF8A8A8A"
                    VerticalOptions="Center" />
            </HorizontalStackLayout>

            <!--  Contador de sesiones  -->
            <HorizontalStackLayout
                Grid.Column="4"
                Spacing="6"
                VerticalOptions="Center">
                <controls:SymbolIcon
                    SymbolName="folder"
                    TintColor="#FF8A8A8A"
                    HeightRequest="{StaticResource IconSizeSmall}"
                    WidthRequest="{StaticResource IconSizeSmall}"
                    VerticalOptions="Center" />
                <Label
                    x:Name="SessionCountLabel"
                    FontSize="{StaticResource FontSizeBody}"
                    Text="0 sesiones"
                    TextColor="#FF8A8A8A"
                    VerticalOptions="Center" />
            </HorizontalStackLayout>

            <!--  Separador vertical  -->
            <BoxView
                Grid.Column="5"
                Margin="2,6"
                BackgroundColor="#FF3A3A3A"
                WidthRequest="1"
                VerticalOptions="Fill" />

            <!--  Usuario actual  -->
            <HorizontalStackLayout
                Grid.Column="6"
                Spacing="8"
                VerticalOptions="Center">
                <Border
                    x:Name="UserPhotoContainer"
                    HeightRequest="22"
                    WidthRequest="22"
                    Stroke="#FF4A4A4A"
                    StrokeThickness="1"
                    IsVisible="False">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="11" />
                    </Border.StrokeShape>
                    <Image
                        x:Name="UserPhotoImage"
                        Aspect="AspectFill" />
                </Border>
                <controls:SymbolIcon
                    x:Name="UserIconPlaceholder"
                    SymbolName="person.circle"
                    TintColor="#FF8A8A8A"
                    HeightRequest="{StaticResource IconSizeMedium}"
                    WidthRequest="{StaticResource IconSizeMedium}"
                    VerticalOptions="Center" />
                <Label
                    x:Name="UserNameLabel"
                    FontSize="{StaticResource FontSizeBody}"
                    Text="Sin perfil"
                    TextColor="#FFB0B0B0"
                    VerticalOptions="Center" />
            </HorizontalStackLayout>

        </Grid>

    </Grid>

</ContentView>
